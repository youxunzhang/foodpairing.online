<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>é£Ÿç‰©åº“æµ‹è¯• - è¥å…»æ—©é¤</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .test-header {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            margin-bottom: 2rem;
        }
        .test-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .status-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .status-title {
            color: #ff6b6b;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .status-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .status-success { color: #28a745; }
        .status-error { color: #dc3545; }
        .status-info { color: #17a2b8; }
        .food-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .food-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .food-card:hover {
            transform: translateY(-5px);
        }
        .food-emoji {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .food-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .food-category {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>ğŸ½ï¸ é£Ÿç‰©åº“åŠŸèƒ½æµ‹è¯•</h1>
        <p>éªŒè¯é£Ÿç‰©åº“é¡µé¢å„é¡¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
    </div>

    <div class="test-section">
        <div class="status-card">
            <div class="status-title">ğŸ“Š æ•°æ®åŠ è½½çŠ¶æ€</div>
            <div id="dataStatus">
                <div class="status-item status-info">æ­£åœ¨æ£€æŸ¥æ•°æ®...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ”§ åŠŸèƒ½æµ‹è¯•</div>
            <div id="functionStatus">
                <div class="status-item status-info">æ­£åœ¨æµ‹è¯•åŠŸèƒ½...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ é£Ÿç‰©æ•°æ®é¢„è§ˆ</div>
            <div id="foodPreview">
                <div class="status-item status-info">æ­£åœ¨åŠ è½½é£Ÿç‰©é¢„è§ˆ...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ”— å¿«é€Ÿé“¾æ¥</div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="../foods.html" style="background: linear-gradient(135deg, #ff6b6b, #ffa500); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">å®Œæ•´é£Ÿç‰©åº“é¡µé¢</a>
                <a href="debug-food.html" style="background: linear-gradient(135deg, #17a2b8, #20c997); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">è¯¦ç»†è°ƒè¯•é¡µé¢</a>
                <a href="test-food-simple.html" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">ç®€å•æµ‹è¯•é¡µé¢</a>
            </div>
        </div>
    </div>

    <script src="../i18n.js"></script>
    <script src="../foods-data.js"></script>
    <script src="../script.js"></script>
    
    <script>
        // æµ‹è¯•è„šæœ¬
        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = `<div class="status-item status-${type}">${message}</div>`;
            }
        }

        function testDataLoading() {
            console.log('å¼€å§‹æµ‹è¯•æ•°æ®åŠ è½½...');
            
            // æµ‹è¯• foodsData
            if (typeof foodsData !== 'undefined') {
                updateStatus('dataStatus', `âœ… foodsData åŠ è½½æˆåŠŸï¼Œå…± ${foodsData.length} ç§é£Ÿç‰©`, 'success');
                
                // æ˜¾ç¤ºå‰6ç§é£Ÿç‰©é¢„è§ˆ
                const previewContainer = document.getElementById('foodPreview');
                if (previewContainer) {
                    let previewHTML = '<div class="food-preview">';
                    foodsData.slice(0, 6).forEach(food => {
                        previewHTML += `
                            <div class="food-card">
                                <div class="food-emoji">${food.emoji}</div>
                                <div class="food-name">${food.name}</div>
                                <div class="food-category">${food.category}</div>
                            </div>
                        `;
                    });
                    previewHTML += '</div>';
                    previewContainer.innerHTML = previewHTML;
                }
            } else {
                updateStatus('dataStatus', 'âŒ foodsData æœªå®šä¹‰', 'error');
            }
        }

        function testFunctions() {
            console.log('å¼€å§‹æµ‹è¯•åŠŸèƒ½...');
            let functionStatus = '';
            
            // æµ‹è¯•å…³é”®å‡½æ•°
            const functions = [
                { name: 'initializeFoodsPage', func: typeof initializeFoodsPage },
                { name: 'displayFoods', func: typeof displayFoods },
                { name: 'createFoodItemCard', func: typeof createFoodItemCard },
                { name: 'getCategoryName', func: typeof getCategoryName }
            ];
            
            functions.forEach(f => {
                if (f.func === 'function') {
                    functionStatus += `<div class="status-item status-success">âœ… ${f.name} å‡½æ•°å­˜åœ¨</div>`;
                } else {
                    functionStatus += `<div class="status-item status-error">âŒ ${f.name} å‡½æ•°ä¸å­˜åœ¨</div>`;
                }
            });
            
            // æµ‹è¯•å…¨å±€å˜é‡
            if (typeof filteredFoods !== 'undefined') {
                functionStatus += `<div class="status-item status-success">âœ… filteredFoods å˜é‡å­˜åœ¨</div>`;
            } else {
                functionStatus += `<div class="status-item status-error">âŒ filteredFoods å˜é‡ä¸å­˜åœ¨</div>`;
            }
            
            if (typeof currentPage !== 'undefined') {
                functionStatus += `<div class="status-item status-success">âœ… currentPage å˜é‡å­˜åœ¨</div>`;
            } else {
                functionStatus += `<div class="status-item status-error">âŒ currentPage å˜é‡ä¸å­˜åœ¨</div>`;
            }
            
            document.getElementById('functionStatus').innerHTML = functionStatus;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            
            setTimeout(() => {
                testDataLoading();
                testFunctions();
                
                console.log('æµ‹è¯•å®Œæˆ');
            }, 500);
        });
    </script>
</body>
</html> 