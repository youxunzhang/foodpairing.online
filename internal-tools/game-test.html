<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Nutrition Game Test - Nutrition Breakfast</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .test-header {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            margin-bottom: 2rem;
        }
        .test-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .status-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .status-title {
            color: #ff6b6b;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .status-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .status-success { color: #28a745; }
        .status-error { color: #dc3545; }
        .status-info { color: #17a2b8; }
        .game-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .game-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #ff6b6b;
        }
        .game-card h4 {
            color: #ff6b6b;
            margin-bottom: 10px;
        }
        .target-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            font-size: 0.9rem;
        }
        .food-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .food-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 0.8rem;
        }
        .food-emoji {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>ğŸ® Nutrition Game Function Test</h1>
        <p>Verify that all functions of the nutrition game page work properly</p>
    </div>

    <div class="test-section">
        <div class="status-card">
            <div class="status-title">ğŸ“Š Data Loading Status</div>
            <div id="dataStatus">
                <div class="status-item status-info">Checking data...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ¯ Game Function Test</div>
            <div id="gameStatus">
                <div class="status-item status-info">Testing game functions...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ® æ¸¸æˆé¢„è§ˆ</div>
            <div id="gamePreview">
                <div class="status-item status-info">æ­£åœ¨åŠ è½½æ¸¸æˆé¢„è§ˆ...</div>
            </div>
        </div>

        <div class="status-card">
            <div class="status-title">ğŸ”— å¿«é€Ÿé“¾æ¥</div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="../game.html" style="background: linear-gradient(135deg, #ff6b6b, #ffa500); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">å®Œæ•´æ¸¸æˆé¡µé¢</a>
                <a href="../foods.html" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">é£Ÿç‰©åº“é¡µé¢</a>
                <a href="../index.html" style="background: linear-gradient(135deg, #17a2b8, #20c997); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">é¦–é¡µ</a>
            </div>
        </div>
    </div>

    <script src="../i18n.js"></script>
    <script src="../foods-data.js"></script>
    <script src="../script.js"></script>
    
    <script>
        // æµ‹è¯•è„šæœ¬
        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = `<div class="status-item status-${type}">${message}</div>`;
            }
        }

        function testDataLoading() {
            console.log('å¼€å§‹æµ‹è¯•æ•°æ®åŠ è½½...');
            
            // æµ‹è¯• foodsData
            if (typeof foodsData !== 'undefined') {
                updateStatus('dataStatus', `âœ… foodsData åŠ è½½æˆåŠŸï¼Œå…± ${foodsData.length} ç§é£Ÿç‰©`, 'success');
            } else {
                updateStatus('dataStatus', 'âŒ foodsData æœªå®šä¹‰', 'error');
            }
        }

        function testGameFunctions() {
            console.log('å¼€å§‹æµ‹è¯•æ¸¸æˆåŠŸèƒ½...');
            let gameStatus = '';
            
            // æµ‹è¯•æ¸¸æˆç›¸å…³å‡½æ•°
            const functions = [
                { name: 'initializeGame', func: typeof initializeGame },
                { name: 'startGame', func: typeof startGame },
                { name: 'pauseGame', func: typeof pauseGame },
                { name: 'restartGame', func: typeof restartGame },
                { name: 'checkGameTarget', func: typeof checkGameTarget }
            ];
            
            functions.forEach(f => {
                if (f.func === 'function') {
                    gameStatus += `<div class="status-item status-success">âœ… ${f.name} å‡½æ•°å­˜åœ¨</div>`;
                } else {
                    gameStatus += `<div class="status-item status-error">âŒ ${f.name} å‡½æ•°ä¸å­˜åœ¨</div>`;
                }
            });
            
            document.getElementById('gameStatus').innerHTML = gameStatus;
        }

        function createGamePreview() {
            console.log('åˆ›å»ºæ¸¸æˆé¢„è§ˆ...');
            
            const previewContainer = document.getElementById('gamePreview');
            if (!previewContainer) return;

            // å®šä¹‰æ¸¸æˆå…³å¡
            const levels = [
                {
                    level: 1,
                    targets: [
                        { type: 'calories', min: 200, max: 400, label: 'çƒ­é‡ 200-400 kcal' },
                        { type: 'protein', min: 10, max: 25, label: 'è›‹ç™½è´¨ 10-25g' }
                    ]
                },
                {
                    level: 2,
                    targets: [
                        { type: 'calories', min: 300, max: 500, label: 'çƒ­é‡ 300-500 kcal' },
                        { type: 'protein', min: 15, max: 30, label: 'è›‹ç™½è´¨ 15-30g' },
                        { type: 'carbs', min: 30, max: 60, label: 'ç¢³æ°´åŒ–åˆç‰© 30-60g' }
                    ]
                },
                {
                    level: 3,
                    targets: [
                        { type: 'calories', min: 400, max: 600, label: 'çƒ­é‡ 400-600 kcal' },
                        { type: 'protein', min: 20, max: 35, label: 'è›‹ç™½è´¨ 20-35g' },
                        { type: 'carbs', min: 40, max: 70, label: 'ç¢³æ°´åŒ–åˆç‰© 40-70g' },
                        { type: 'fiber', min: 5, max: 15, label: 'çº¤ç»´ 5-15g' }
                    ]
                }
            ];

            let previewHTML = '<div class="game-preview">';
            
            levels.forEach(level => {
                previewHTML += `
                    <div class="game-card">
                        <h4>å…³å¡ ${level.level}</h4>
                        <div style="margin-bottom: 15px;">
                            <strong>è¥å…»ç›®æ ‡:</strong>
                            ${level.targets.map(target => `
                                <div class="target-item">${target.label}</div>
                            `).join('')}
                        </div>
                        <div>
                            <strong>æ¨èé£Ÿç‰©:</strong>
                            <div class="food-preview">
                                ${foodsData ? foodsData.slice(0, 6).map(food => `
                                    <div class="food-item">
                                        <div class="food-emoji">${food.emoji}</div>
                                        <div>${food.name}</div>
                                    </div>
                                `).join('') : '<div>æš‚æ— é£Ÿç‰©æ•°æ®</div>'}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            previewHTML += '</div>';
            previewContainer.innerHTML = previewHTML;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ¸¸æˆæµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            
            setTimeout(() => {
                testDataLoading();
                testGameFunctions();
                createGamePreview();
                
                console.log('æ¸¸æˆæµ‹è¯•å®Œæˆ');
            }, 500);
        });
    </script>
</body>
</html> 