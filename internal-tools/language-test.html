<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯• - è¥å…»æ—©é¤</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 100px auto;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .test-title {
            text-align: center;
            color: #ff6b6b;
            margin-bottom: 30px;
            font-size: 2rem;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        .test-section h3 {
            color: #333;
            margin-bottom: 15px;
        }
        .language-demo {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
        }
        .status-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
        .status-error {
            background: #f8d7da;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #dc3545;
        }
        .translation-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .translation-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        .translation-key {
            font-weight: 600;
            color: #ff6b6b;
            margin-bottom: 5px;
        }
        .translation-value {
            color: #666;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸŒ è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ”§ è¯­è¨€åˆ‡æ¢æŒ‰é’®</h3>
            <div class="language-demo">
                <div class="language-switcher">
                    <button class="lang-btn" data-lang="zh" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
                    <button class="lang-btn active" data-lang="en" onclick="switchLanguage('en')">English</button>
                </div>
            </div>
            <div id="languageStatus" class="status-info">
                å½“å‰è¯­è¨€: English (en)
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“ ç¿»è¯‘æµ‹è¯•</h3>
            <div class="translation-test">
                <div class="translation-item">
                    <div class="translation-key">å¯¼èˆªæ ‡é¢˜</div>
                    <div class="translation-value" data-i18n="nav.title">è¥å…»æ—©é¤</div>
                </div>
                <div class="translation-item">
                    <div class="translation-key">é¡µé¢æ ‡é¢˜</div>
                    <div class="translation-value" data-i18n="header.title">è¥å…»æ—©é¤æ­é…è®¡ç®—å™¨</div>
                </div>
                <div class="translation-item">
                    <div class="translation-key">é¡µé¢å‰¯æ ‡é¢˜</div>
                    <div class="translation-value" data-i18n="header.subtitle">é€‰æ‹©æ‚¨å–œæ¬¢çš„é£Ÿç‰©ï¼ŒæŸ¥çœ‹è¥å…»ä¿¡æ¯å¹¶è®¡ç®—æ­é…æ•ˆæœ</div>
                </div>
                <div class="translation-item">
                    <div class="translation-key">è®¡ç®—å™¨æ ‡é¢˜</div>
                    <div class="translation-value" data-i18n="calculator.selectFood">é€‰æ‹©é£Ÿç‰©</div>
                </div>
                <div class="translation-item">
                    <div class="translation-key">è¥å…»åˆ†æ</div>
                    <div class="translation-value" data-i18n="calculator.nutritionAnalysis">è¥å…»åˆ†æ</div>
                </div>
                <div class="translation-item">
                    <div class="translation-key">ç‰¹è‰²åŠŸèƒ½æ ‡é¢˜</div>
                    <div class="translation-value" data-i18n="features.title">ä¸ºä»€ä¹ˆé€‰æ‹©è¥å…»æ—©é¤ï¼Ÿ</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ” åŠŸèƒ½çŠ¶æ€</h3>
            <div id="functionStatus">
                <div class="status-info">æ­£åœ¨æ£€æŸ¥åŠŸèƒ½çŠ¶æ€...</div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”— å¿«é€Ÿé“¾æ¥</h3>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                <a href="../index.html" style="background: linear-gradient(135deg, #ff6b6b, #ffa500); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">é¦–é¡µ</a>
                <a href="../foods.html" style="background: linear-gradient(135deg, #ff6b6b, #ffa500); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">é£Ÿç‰©åº“</a>
                <a href="../game.html" style="background: linear-gradient(135deg, #ff6b6b, #ffa500); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600;">è¥å…»æ¸¸æˆ</a>
            </div>
        </div>
    </div>

    <script src="../i18n.js"></script>
    <script>
        // æµ‹è¯•è„šæœ¬
        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            if (element) {
                element.className = `status-${type}`;
                element.innerHTML = message;
            }
        }

        function updateLanguageStatus() {
            const statusElement = document.getElementById('languageStatus');
            if (statusElement) {
                const currentLang = typeof currentLanguage !== 'undefined' ? currentLanguage : 'en';
                const langName = currentLang === 'zh' ? 'ä¸­æ–‡' : 'English';
                statusElement.innerHTML = `å½“å‰è¯­è¨€: ${langName} (${currentLang})`;
            }
        }

        function testLanguageFunctions() {
            console.log('å¼€å§‹æµ‹è¯•è¯­è¨€åŠŸèƒ½...');
            let functionStatus = '';
            
            // æµ‹è¯•å…³é”®å‡½æ•°
            const functions = [
                { name: 'switchLanguage', func: typeof switchLanguage },
                { name: 'getText', func: typeof getText },
                { name: 'initLanguage', func: typeof initLanguage }
            ];
            
            functions.forEach(f => {
                if (f.func === 'function') {
                    functionStatus += `<div class="status-info">âœ… ${f.name} å‡½æ•°å­˜åœ¨</div>`;
                } else {
                    functionStatus += `<div class="status-error">âŒ ${f.name} å‡½æ•°ä¸å­˜åœ¨</div>`;
                }
            });
            
            // æµ‹è¯•å…¨å±€å˜é‡
            if (typeof currentLanguage !== 'undefined') {
                functionStatus += `<div class="status-info">âœ… currentLanguage å˜é‡å­˜åœ¨ (å½“å‰å€¼: ${currentLanguage})</div>`;
            } else {
                functionStatus += `<div class="status-error">âŒ currentLanguage å˜é‡ä¸å­˜åœ¨</div>`;
            }
            
            if (typeof i18nData !== 'undefined') {
                functionStatus += `<div class="status-info">âœ… i18nData æ•°æ®å­˜åœ¨</div>`;
            } else {
                functionStatus += `<div class="status-error">âŒ i18nData æ•°æ®ä¸å­˜åœ¨</div>`;
            }
            
            // æµ‹è¯•ç¿»è¯‘é”®
            const testKeys = ['nav.title', 'header.title', 'calculator.selectFood'];
            testKeys.forEach(key => {
                try {
                    const text = getText(key);
                    if (text && text !== key) {
                        functionStatus += `<div class="status-info">âœ… ç¿»è¯‘é”® "${key}" æ­£å¸¸ (${text})</div>`;
                    } else {
                        functionStatus += `<div class="status-error">âŒ ç¿»è¯‘é”® "${key}" è¿”å›åŸå€¼</div>`;
                    }
                } catch (error) {
                    functionStatus += `<div class="status-error">âŒ ç¿»è¯‘é”® "${key}" å‡ºé”™: ${error.message}</div>`;
                }
            });
            
            document.getElementById('functionStatus').innerHTML = functionStatus;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('è¯­è¨€æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            
            setTimeout(() => {
                updateLanguageStatus();
                testLanguageFunctions();
                
                console.log('è¯­è¨€æµ‹è¯•å®Œæˆ');
            }, 500);
        });

        // ç›‘å¬è¯­è¨€åˆ‡æ¢
        const originalSwitchLanguage = window.switchLanguage;
        window.switchLanguage = function(lang) {
            console.log('è¯­è¨€åˆ‡æ¢è¢«è°ƒç”¨:', lang);
            if (originalSwitchLanguage) {
                originalSwitchLanguage(lang);
            }
            setTimeout(() => {
                updateLanguageStatus();
            }, 100);
        };
    </script>
</body>
</html> 